<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Government RAG Assistant</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
  
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Orbitron', monospace;
      background: #050a1a;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      overflow-x: hidden;
    }

    /* HUD Component + Grid + Frame */
    .ai-hud-component {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      min-width: 100%;
      background: #050a1a;
      position: relative;
      overflow: hidden;
      padding: 20px;
    }

    .ai-hud-grid {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(
          0deg,
          rgba(0, 255, 255, 0.05) 0px,
          rgba(0, 255, 255, 0.05) 1px,
          transparent 1px,
          transparent 20px
        ),
        repeating-linear-gradient(
          90deg,
          rgba(0, 255, 255, 0.05) 0px,
          rgba(0, 255, 255, 0.05) 1px,
          transparent 1px,
          transparent 20px
        );
      animation: grid-move 2s linear infinite;
      z-index: 0;
    }

    .ai-hud-frame {
      display: flex;
      flex-direction: column;
      align-items: stretch;
      position: relative;
      padding: 2rem;
      width: 100%;
      max-width: 800px;
      background: rgba(0, 255, 255, 0.05);
      border: 1px solid rgba(0, 255, 255, 0.2);
      box-shadow: 0 0 30px rgba(0, 255, 255, 0.1);
      backdrop-filter: blur(5px);
      z-index: 2;
      animation: frame-pulse 5s infinite ease-in-out;
      border-radius: 4px;
    }

    .ai-hud-header {
      text-align: center;
      margin-bottom: 2rem;
      position: relative;
      padding-bottom: 1rem;
    }

    .ai-hud-header h2 {
      color: #00ffff;
      font-size: 2.2rem;
      font-weight: 700;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      margin-bottom: 0.5rem;
      text-shadow: 0 0 10px rgba(0, 255, 255, 0.7);
    }

    .ai-hud-header::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 10%;
      width: 80%;
      height: 1px;
      background: linear-gradient(90deg, 
        transparent, 
        rgba(0, 255, 255, 0.8), 
        transparent);
    }

    .ai-hud-input-wrapper {
      position: relative;
      display: flex;
      align-items: center;
      z-index: 3;
      margin-bottom: 2rem;
    }

    .ai-hud-input {
      flex: 1;
      background: transparent;
      border: 1px solid rgba(0, 255, 255, 0.2);
      outline: none;
      color: #00ffff;
      font-family: "Orbitron", sans-serif;
      font-size: 1rem;
      letter-spacing: 0.1em;
      padding: 1rem 1.25rem;
      caret-color: #00ffff;
      transition:
        border 0.3s,
        box-shadow 0.3s;
      border-radius: 2px;
    }

    .ai-hud-input:hover {
      border: 1px solid rgba(0, 255, 255, 0.5);
      box-shadow: 0 0 12px rgba(0, 255, 255, 0.3);
    }

    .ai-hud-input::placeholder {
      color: rgba(0, 255, 255, 0.4);
    }

    .ai-hud-btn {
      background: rgba(0, 255, 255, 0.05);
      border: 1px solid rgba(0, 255, 255, 0.4);
      padding: 1rem 2rem;
      cursor: pointer;
      margin-left: 0.75rem;
      transition: all 0.4s ease;
      clip-path: polygon(0 0, 100% 0, 85% 100%, 0% 100%);
      box-shadow: 0 0 8px rgba(0, 255, 255, 0.3);
      transform: rotate(-1deg);
      color: #00ffff;
      font-family: "Orbitron", sans-serif;
      font-weight: 500;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      font-size: 1rem;
    }

    .ai-hud-btn:hover {
      clip-path: polygon(0 0, 100% 0, 100% 100%, 0% 100%);
      box-shadow:
        0 0 25px rgba(0, 255, 255, 0.8),
        0 0 40px rgba(0, 255, 255, 0.5);
      background: rgba(0, 255, 255, 0.08);
      transform: rotate(-1deg) scale(1.1);
    }

    .ai-hud-btn:active {
      clip-path: polygon(0 0, 100% 0, 100% 100%, 0% 100%);
      box-shadow:
        0 0 25px rgba(0, 255, 255, 0.8),
        0 0 40px rgba(0, 255, 255, 0.5);
      background: rgba(0, 255, 255, 0.08);
      transform: rotate(-2deg) scale(1);
    }

    .ai-hud-icon {
      width: 1rem;
      height: 1rem;
      stroke: #00ffff;
    }

    /* Answer Container */
    .ai-hud-answer {
      margin-top: 2rem;
      padding: 1.5rem;
      background: rgba(0, 255, 255, 0.03);
      border-radius: 2px;
      border-left: 3px solid rgba(0, 255, 255, 0.5);
      white-space: pre-wrap;
      color: #a0f0f0;
      font-size: 0.95rem;
      line-height: 1.6;
      letter-spacing: 0.05em;
      font-family: 'Courier New', monospace;
      box-shadow: inset 0 0 20px rgba(0, 255, 255, 0.05);
      min-height: 120px;
      position: relative;
      z-index: 1;
      overflow-y: auto;
      max-height: 400px;
    }

    .ai-hud-answer::before {
      content: 'RESPONSE:';
      display: block;
      color: rgba(0, 255, 255, 0.6);
      font-size: 0.8rem;
      margin-bottom: 0.75rem;
      letter-spacing: 0.2em;
      font-family: 'Orbitron', sans-serif;
    }

    /* Loader */
    .loader-wrapper {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 180px;
      height: 180px;
      margin: 20px auto;
      color: #00ffff;
      z-index: 10;
    }

    .loader {
      position: absolute;
      width: 100%;
      aspect-ratio: 1 / 1;
      border-radius: 50%;
      animation: loader-rotate 2s linear infinite;
      box-shadow:
        0 10px 20px 0 rgba(0, 255, 255, 0.1) inset,
        0 20px 30px 0 rgba(173, 95, 255, 0.2) inset,
        0 60px 60px 0 rgba(71, 30, 236, 0.2) inset;
    }

    @keyframes loader-rotate {
      0% {
        transform: rotate(90deg);
        box-shadow:
          0 10px 20px 0 rgba(0, 255, 255, 0.1) inset,
          0 20px 30px 0 rgba(173, 95, 255, 0.3) inset,
          0 60px 60px 0 rgba(71, 30, 236, 0.3) inset;
      }
      50% {
        transform: rotate(270deg);
        box-shadow:
          0 10px 20px 0 rgba(0, 255, 255, 0.1) inset,
          0 20px 10px 0 rgba(214, 10, 71, 0.3) inset,
          0 40px 60px 0 rgba(49, 30, 128, 0.3) inset;
      }
      100% {
        transform: rotate(450deg);
        box-shadow:
          0 10px 20px 0 rgba(0, 255, 255, 0.1) inset,
          0 20px 30px 0 rgba(173, 95, 255, 0.3) inset,
          0 60px 60px 0 rgba(71, 30, 236, 0.3) inset;
      }
    }

    .loader-letter {
      display: inline-block;
      opacity: 0.4;
      animation: loader-letter-anim 2s infinite;
      z-index: 1;
      font-family: 'Orbitron', sans-serif;
      font-weight: 700;
      text-shadow: 0 0 5px rgba(0, 255, 255, 0.7);
    }

    @keyframes loader-letter-anim {
      0%, 100% {
        opacity: 0.4;
      }
      20% {
        opacity: 1;
        transform: scale(1.15);
        text-shadow: 0 0 10px rgba(0, 255, 255, 1);
      }
      40% {
        opacity: 0.7;
      }
    }

    /* Grid animations */
    @keyframes grid-move {
      0% {
        background-position:
          0 0,
          0 0;
      }
      100% {
        background-position:
          40px 40px,
          40px 40px;
      }
    }

    @keyframes frame-pulse {
      0%,
      100% {
        opacity: 1;
        box-shadow: 0 0 30px rgba(0, 255, 255, 0.1);
      }
      50% {
        opacity: 0.95;
        box-shadow: 0 0 40px rgba(0, 255, 255, 0.15);
      }
    }

    /* Glitch effect for title */
    .glitch {
      position: relative;
      display: inline-block;
    }

    .glitch::before,
    .glitch::after {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .glitch::before {
      left: 2px;
      text-shadow: -2px 0 #ff00ff;
      clip: rect(44px, 450px, 56px, 0);
      animation: glitch-anim 5s infinite linear alternate-reverse;
    }

    .glitch::after {
      left: -2px;
      text-shadow: -2px 0 #00ffff;
      clip: rect(44px, 450px, 56px, 0);
      animation: glitch-anim2 5s infinite linear alternate-reverse;
    }

    @keyframes glitch-anim {
      0% {
        clip: rect(31px, 9999px, 94px, 0);
      }
      5% {
        clip: rect(112px, 9999px, 76px, 0);
      }
      10% {
        clip: rect(85px, 9999px, 77px, 0);
      }
      15% {
        clip: rect(27px, 9999px, 97px, 0);
      }
      20% {
        clip: rect(64px, 9999px, 98px, 0);
      }
      25% {
        clip: rect(61px, 9999px, 85px, 0);
      }
      30% {
        clip: rect(99px, 9999px, 74px, 0);
      }
      35% {
        clip: rect(4px, 9999px, 22px, 0);
      }
      40% {
        clip: rect(75px, 9999px, 58px, 0);
      }
      45% {
        clip: rect(12px, 9999px, 99px, 0);
      }
      50% {
        clip: rect(54px, 9999px, 57px, 0);
      }
      55% {
        clip: rect(88px, 9999px, 52px, 0);
      }
      60% {
        clip: rect(3px, 9999px, 96px, 0);
      }
      65% {
        clip: rect(31px, 9999px, 94px, 0);
      }
      70% {
        clip: rect(41px, 9999px, 92px, 0);
      }
      75% {
        clip: rect(45px, 9999px, 98px, 0);
      }
      80% {
        clip: rect(18px, 9999px, 83px, 0);
      }
      85% {
        clip: rect(32px, 9999px, 26px, 0);
      }
      90% {
        clip: rect(15px, 9999px, 48px, 0);
      }
      95% {
        clip: rect(55px, 9999px, 53px, 0);
      }
      100% {
        clip: rect(12px, 9999px, 85px, 0);
      }
    }

    @keyframes glitch-anim2 {
      0% {
        clip: rect(65px, 9999px, 100px, 0);
      }
      5% {
        clip: rect(52px, 9999px, 74px, 0);
      }
      10% {
        clip: rect(79px, 9999px, 85px, 0);
      }
      15% {
        clip: rect(75px, 9999px, 5px, 0);
      }
      20% {
        clip: rect(67px, 9999px, 61px, 0);
      }
      25% {
        clip: rect(14px, 9999px, 79px, 0);
      }
      30% {
        clip: rect(1px, 9999px, 66px, 0);
      }
      35% {
        clip: rect(86px, 9999px, 30px, 0);
      }
      40% {
        clip: rect(23px, 9999px, 98px, 0);
      }
      45% {
        clip: rect(85px, 9999px, 72px, 0);
      }
      50% {
        clip: rect(71px, 9999px, 75px, 0);
      }
      55% {
        clip: rect(2px, 9999px, 48px, 0);
      }
      60% {
        clip: rect(30px, 9999px, 16px, 0);
      }
      65% {
        clip: rect(59px, 9999px, 50px, 0);
      }
      70% {
        clip: rect(41px, 9999px, 62px, 0);
      }
      75% {
        clip: rect(2px, 9999px, 82px, 0);
      }
      80% {
        clip: rect(47px, 9999px, 73px, 0);
      }
      85% {
        clip: rect(3px, 9999px, 27px, 0);
      }
      90% {
        clip: rect(40px, 9999px, 86px, 0);
      }
      95% {
        clip: rect(45px, 9999px, 72px, 0);
      }
      100% {
        clip: rect(23px, 9999px, 49px, 0);
      }
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .ai-hud-frame {
        padding: 1.5rem;
      }
      
      .ai-hud-header h2 {
        font-size: 1.8rem;
        letter-spacing: 0.1em;
      }
      
      .ai-hud-input-wrapper {
        flex-direction: column;
      }
      
      .ai-hud-btn {
        margin-left: 0;
        margin-top: 1rem;
        width: 100%;
        clip-path: polygon(0 0, 100% 0, 95% 100%, 5% 100%);
      }
      
      .ai-hud-btn:hover {
        clip-path: polygon(0 0, 100% 0, 100% 100%, 0% 100%);
      }
    }
  </style>
</head>

<body>
  <div class="ai-hud-component">
    <div class="ai-hud-grid"></div>
    
    <div class="ai-hud-frame">
      <div class="ai-hud-header">
        <h2 class="glitch" data-text="GOVERNMENT RAG ASSISTANT">GOVERNMENT RAG ASSISTANT</h2>
        <p style="color: rgba(0, 255, 255, 0.6); font-size: 0.9rem; letter-spacing: 0.1em;">
          Secure Access to Government Acts & Legislation
        </p>
      </div>

      <div class="ai-hud-input-wrapper">
        <textarea 
          id="question" 
          class="ai-hud-input" 
          placeholder="Enter your query about government acts..."
          rows="3"
        ></textarea>
        <button class="ai-hud-btn" onclick="ask()">
          <span>Submit</span>
          <svg class="ai-hud-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M22 2L11 13" stroke-width="2" stroke-linecap="round"/>
            <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>

      <!-- Loader -->
      <div id="loader" class="loader-wrapper" style="display: none;">
        <div class="loader"></div>
        <div>
          <span class="loader-letter">T</span>
          <span class="loader-letter">H</span>
          <span class="loader-letter">I</span>
          <span class="loader-letter">N</span>
          <span class="loader-letter">K</span>
          <span class="loader-letter">I</span>
          <span class="loader-letter">N</span>
          <span class="loader-letter">G</span>
        </div>
      </div>

      <div class="ai-hud-answer" id="answer"></div>
    </div>
  </div>

  <script>
    async function ask() {
      const question = document.getElementById("question").value;
      const answerDiv = document.getElementById("answer");
      const loader = document.getElementById("loader");

      if (!question.trim()) {
        answerDiv.innerHTML = "<span style='color: rgba(255, 50, 50, 0.8);'>ERROR: No query entered. Please enter a question about government acts.</span>";
        return;
      }

      // Show loader
      loader.style.display = "flex";
      answerDiv.innerHTML = "";

      try {
        const response = await fetch("http://127.0.0.1:8000/query", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ question })
        });

        const data = await response.json();
        
        // Format the answer with cyberpunk styling
        if (data.answer) {
          answerDiv.innerHTML = data.answer
            .replace(/\n/g, '<br>')
            .replace(/### (.*?)(?:\n|$)/g, '<strong style="color: #00ffff;">$1</strong><br>')
            .replace(/\*\*(.*?)\*\*/g, '<strong style="color: #a0f0f0;">$1</strong>');
        } else {
          answerDiv.innerHTML = "<span style='color: rgba(255, 50, 50, 0.8);'>ERROR: No response received from server.</span>";
        }
      } catch (error) {
        console.error("Error:", error);
        answerDiv.innerHTML = `<span style='color: rgba(255, 50, 50, 0.8);'>NETWORK ERROR: Unable to contact server. Please ensure the backend is running at http://127.0.0.1:8000</span>`;
      } finally {
        loader.style.display = "none";
      }
    }

    // Allow submitting with Enter key
    document.getElementById("question").addEventListener("keydown", function(event) {
      if (event.key === "Enter" && !event.shiftKey) {
        event.preventDefault();
        ask();
      }
    });
  </script>
</body>
</html>